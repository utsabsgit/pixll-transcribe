<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8" />
        <style>
            @import "style.css";

            body {
                width: 360px;
                min-height: 280px;
                padding: var(--gap_xl);
                margin: 0;
            }

            .header {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-bottom: var(--gap);
            }

            .header h3 {
                font-size: 1.1rem;
                position: relative;
                display: inline-block;
                color: var(--c1);
                font-weight: 600;
                letter-spacing: -0.5px;
            }

            .header #status {
                border: solid 2px var(--green);
                border-radius: 0.4em;
                font-size: 0.5em;
                padding: 2px 6px;
                text-transform: uppercase;
                font-weight: 700;
                letter-spacing: 0.5px;
                color: var(--green);
                background: rgba(142, 71, 145, 0.1);
                margin-left: 4px;
                vertical-align: middle;
            }

            .btns {
                display: flex;
                gap: 8px;
                align-items: center;
            }

            #currentSection,
            body[data-status="ready"] .btn-stop,
            body[data-status="error"] .btn-start,
            body[data-status="downloading"] .btn-start,
            body[data-status="transcribing"] .btn-start {
                display: none;
            }

            body[data-status="transcribing"] #currentSection {
                display: block;
            }

            #currentSection .btns {
                justify-content: space-between;
                margin-top: var(--gap);
            }

            .saved-item {
                background: linear-gradient(135deg, var(--bg3) 0%, var(--bg1) 100%);
                border-radius: var(--radius);
                padding: var(--gap);
                margin-bottom: var(--gap_s);
                border: 1px solid var(--bg4);
                box-shadow: var(--shadow);
                transition: var(--transition);
            }

            .saved-item:hover {
                box-shadow: 0 6px 20px rgba(0, 0, 0, 0.4);
            }

            .saved-item .title {
                color: var(--c1);
                font-size: 14px;
                font-weight: 600;
                margin-bottom: 8px;
                display: -webkit-box;
                -webkit-line-clamp: 2;
                line-clamp: 2;
                -webkit-box-orient: vertical;
                overflow: hidden;
            }

            .saved-item .meta {
                display: flex;
                justify-content: space-between;
                align-items: center;
                margin-top: 8px;
            }

            .saved-item-date {
                color: var(--c3);
                font-size: 11px;
            }
        </style>
    </head>
    <body data-status="ready" data-has-unsaved="false">
        <div class="header">
            <h3>Pixll Transcription <sup id="status">Ready</sup></h3>
            <div class="controls">
                <button id="startBtn" class="btn-start">Start</button>
                <button id="stopBtn" class="btn-stop" disabled>Stop</button>
            </div>
        </div>

        <div class="mic-toggle-section">
            <label class="toggle-container">
                <span class="toggle-label">Record Microphone</span>
                <input type="checkbox" id="micToggle" />
                <span class="toggle-slider"></span>
            </label>
        </div>

        <div class="status-message"></div>

        <div id="currentSection" class="section">
            <div class="section-title">Live Transcription</div>
            <div id="liveTranscription" class="live-transcription-list">
                <div class="empty-state">No transcription yet...</div>
            </div>
            <button id="toggleSidepanel" class="btn-text">Open in side panel</button>
        </div>

        <div class="recent-transcriptions section">
            <div class="section-title">Recent Transcriptions</div>
            <div id="savedList">
                <div class="empty-state">No saved transcriptions</div>
            </div>
            <button id="viewAllBtn" class="btn-text">View All Transcriptions</button>
        </div>
        <script src="dexie.min.js"></script>
        <script src="transcriptionDB.js"></script>
        <script src="ui-helper.js"></script>
        <script src="popup.js"></script>
    </body>
</html>
